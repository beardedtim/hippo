const utils = require('@/utils')

const env = (key, fallback) => {
  utils.invariant(
    (key in process.env) || fallback !== undefined,
    'You tried to access a key on the environment that was not set nor did you provide a fallback'
  );

  const value = process.env[key]

  if (value === undefined) {
    return fallback
  }

  return value
}

module.exports.string = (key, fallback) => String(env(key, fallback))
module.exports.number = (key, fallback) => Number(env(key, fallback))
module.exports.obj = (key, fallback) => JSON.parse(env(key, fallback))
