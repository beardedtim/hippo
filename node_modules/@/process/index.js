const utils = require('@/utils')

/**
 * @type {function(): number}
 */
module.exports.pid = utils.always(process.pid)

/**
 * @type {function(): string}
 */
module.exports.platform = utils.always(process.platform)

/**
 * Catches errors on the process not caught by application code
 * 
 * @param {function(): void} cb The callback to use when an error happens
 * @param {boolean=true} alsoPromises If you want to handle uncaught rejections as well
 */
module.exports.onUncaughtError = (cb, alsoPromises = true) => {
    process.on('uncaughtError', cb)

    if(alsoPromises) {
        process.on('unhandledRejection', cb)
    }
}